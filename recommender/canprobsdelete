#%% Change working directory from the workspace root to the ipynb file location. Turn this addition off with the DataScience.changeDirOnImportExport setting
import os
try:
	os.chdir(os.path.join(os.getcwd(), 'movies'))
	print(os.getcwd())
except:
	pass

#%%
import pandas as pd
from rake_nltk import Rake
import numpy as np
from sklearn.metrics.pairwise import cosine_similarity
from sklearn.feature_extraction.text import CountVectorizer
from recommender.models import Movie

pd.set_option('display.max_columns', 100)
df = pd.read_csv('https://query.data.world/s/uikepcpffyo2nhig52xxeevdialfl7')
df.head()


#%%
df = df[['Title','Genre','Director','Actors','Plot', 'tomatoURL', 'Poster']]
df.head()


#%%
db_as_dict = df.to_dict('index')

print(db_as_dict)


#%%
print(db_as_dict[3])


#%%
for index in db_as_dict:
    mov = Movie(**db_as_dict[index])
    mov.save()


#%%



#%%
for movie in Movie.objects.all():
    print(movie.id)
    print(movie.Title)


#%%



